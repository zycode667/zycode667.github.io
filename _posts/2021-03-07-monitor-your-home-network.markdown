---
layout: post
title:  "监控自己的家庭网络"
date:   2021-03-07 17:2:56 +0800
categories: network
---

家里的智能IOT设备越来越多，生活上确实方便了不少，洗碗机、扫地机器人解放了双手；联网的电饭煲和空调，可以在到家之前提前开好。以及这些智能设备的控制中台——智能音箱，更是时刻都在联网。这些随时在联网的设备，除了在正常的工作之外，有没有做一些别的事情呢？有没有收集不必要的数据，有没有其他人通过这个长期保持的长连接进入你家的网络呢？

所以我觉得有必要对自己的家庭网络做一些布置，监控一下家里的网络情况。虽然不能全部看到他们的行为，看到一部份还是可以的。

IOT设备的网络通信，是这样一个过程：从IOT设备发出网络数据，到通过网络设备（家里的交换路由、公网的路由）传输，然后到IOT设备的服务器。想要监控这个过程，有三条途径分别是:
    一、在IOT设备本身监控，比如不用官方的软件，用开源的固件（石头扫地机器人就有开源固件）
    二、在家庭网络上做监控，一般情况下家里的网络只有一个光猫这一个出口（接了多条宽带的不算哈），所以可以在这里做分析。
    三、在IOT设备厂家的服务器监控分析，这个基本就不可行了。
我这里就是在家里的网络出口做监控的，只能看到一部分行为，看不到全部的，后面的再想其他办法.

家里的网络架构如图：


这次增加的设备，是很多人用来做软路由的4网口小主机。CPU是Intel n3540，4核4线程，4x intel i211千兆网卡，一个msata接口，一个ddr3l内存插槽。硬盘是早年笔记本拆下的一块180G SSD，ddr3内存现在挺便宜的，买了一个8G的内存。感觉是山寨的，老板说是三星的颗粒。听说国内不少小厂都可以自己拆内存颗粒做内存条了，这条应该就是这种。
其实4G内存也够用，因为我还想跑一些其他的东西，就索性加多点把，反正也就贵了几十块钱。

装机完毕，一次点亮。操作系统装的是Linux。因为个人习惯，装了个OpenSUSE上去。








